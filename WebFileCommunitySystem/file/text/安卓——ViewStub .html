<!DOCTYPE html><html lang='zh-cn'>
<head>
<meta charset='UTF-8'>
<meta http-equiv='content - type' content='text/html; charset=UTF-8'>
<metaname='viewport' content='width=device-width,initial-scale=1.0'/> 
<title>安卓——ViewStub </title></head><body><div><br></div><div><pre style="font-size: 10.5pt; font-family: 宋体;"><pre style="font-family: 宋体; font-size: 10.5pt;"><pre style="font-family: 宋体; font-size: 10.5pt;"><ol><li>在xml 设计页面添加标签</li></ol>   &lt;<span style="font-size: 10.5pt; color: rgb(0, 0, 128); font-weight: bold;">ViewStub</span><span style="font-size: 10.5pt;"> </span><span style="font-size: 10.5pt; color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">:id=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"@+id/v1"</span><br>    <span style="font-size: 10.5pt; color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">:inflatedId=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"@+id/v2"<br></span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="font-size: 10.5pt; color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">:layout_width=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"match_parent"<br></span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="font-size: 10.5pt; color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">:layout_height=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"match_parent"<br></span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="font-size: 10.5pt; color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">:layout=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"@layout/t_view_stub"</span><span style="font-size: 10.5pt;">/&gt; //此处是下面的layout xml 文件名</span><br><hr style="font-size: 10.5pt;"></pre><pre style="font-family: 宋体; font-size: 10.5pt;">    2.  待刷新显示的 layout xml   &lt;?<span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">xml version=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"1.0" </span><span style="font-size: 10.5pt; color: rgb(0, 0, 255); font-weight: bold;">encoding=</span><span style="font-size: 10.5pt; color: rgb(0, 128, 0); font-weight: bold;">"utf-8"</span><span style="font-size: 10.5pt; font-style: italic;">?&gt;</span></pre><pre style="font-family: 宋体; font-size: 10.5pt;">&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">LinearLayout </span><span style="color: rgb(0, 0, 255); font-weight: bold;">xmlns:</span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"http://schemas.android.com/apk/res/android"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_width=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"match_parent"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_height=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"match_parent"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:orientation=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"vertical"</span>&gt;<br><br><br><br>    &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">Button<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_width=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"wrap_content"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_height=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"wrap_content"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:id=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@+id/bttxt"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:text=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"正在下载......"</span>/&gt;<br>    &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">TextView<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:id=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@+id/txt1"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_width=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"wrap_content"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_height=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"wrap_content"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:text=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"下载50%"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:textSize=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"30dp"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:visibility=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"invisible"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span>/&gt;<br>&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">LinearLayout</span>&gt;<br></pre><pre style="font-family: 宋体; font-size: 10.5pt;"><hr></pre><pre style="font-family: 宋体; font-size: 10.5pt;">3 JAVA 代码 </pre><pre style="font-family: 宋体; font-size: 10.5pt;"><span style="color: rgb(0, 0, 128); font-weight: bold;">public class </span>MainActivity <span style="color: rgb(0, 0, 128); font-weight: bold;">extends </span>AppCompatActivity <span style="color: rgb(128, 128, 128); font-style: italic;">//implements View.OnClickListener<br></span>{<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">private </span>Button <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>;<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">private </span>ViewStub <span style="color: rgb(102, 14, 122); font-weight: bold;">v1</span>;<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">private </span>TextView <span style="color: rgb(102, 14, 122); font-weight: bold;">tx</span>;<br>    <span style="color: rgb(128, 128, 0);">@Override<br></span><span style="color: rgb(128, 128, 0);">    </span><span style="color: rgb(0, 0, 128); font-weight: bold;">protected void </span>onCreate(Bundle savedInstanceState) {<br>        <span style="color: rgb(0, 0, 128); font-weight: bold;">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">activity_main</span>);<br>        <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>=(Button)findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">bt1</span>);<span style="color: rgb(128, 128, 128); font-style: italic;">//获取控件<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">v1</span>= (ViewStub) findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">v1</span>);<br>        <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>.setOnClickListener(<span style="color: rgb(0, 0, 128); font-weight: bold;">new </span>click());<br>        <span style="color: rgb(102, 14, 122); font-weight: bold;">tx</span>= (TextView) findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">txt1</span>);<br><span style="color: rgb(128, 128, 128); font-style: italic;">//        bt1.setOnClickListener(new View.OnClickListener(){<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//            @Override<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//            public void onClick(View v) {<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//            }<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//        }); 匿名内部类实现监听<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span>}</pre><pre style="font-family: 宋体; font-size: 10.5pt;"><br></pre><pre style="font-family: 宋体; font-size: 10.5pt;"><hr><pre style="font-family: 宋体; font-size: 10.5pt;">  <span style="color: rgb(128, 128, 128); font-style: italic;">//新建内部类监听器<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">  </span><span style="color: rgb(0, 0, 128); font-weight: bold;">class </span>click <span style="color: rgb(0, 0, 128); font-weight: bold;">implements  </span>View.OnClickListener<br>  {<br>      <span style="color: rgb(128, 128, 0);">@Override<br></span><span style="color: rgb(128, 128, 0);">      </span><span style="color: rgb(0, 0, 128); font-weight: bold;">public void </span>onClick(View v) {<br>          <span style="color: rgb(0, 0, 128); font-weight: bold;">if </span>(findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">v1</span>)!=<span style="color: rgb(0, 0, 128); font-weight: bold;">null</span>) {<br>              <span style="color: rgb(102, 14, 122); font-weight: bold;">v1</span>.inflate();<br>              <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>.setText(<span style="color: rgb(0, 128, 0); font-weight: bold;">"暂停下载"</span>);<br>              <span style="color: rgb(102, 14, 122); font-weight: bold;">tx</span>.setVisibility(View.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">VISIBLE</span>);<br><br>          } <span style="color: rgb(0, 0, 128); font-weight: bold;">else </span>{<br>              View vv=findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">v2</span>);<br>              String s= (String) <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>.getText();<br>              <span style="color: rgb(0, 0, 128); font-weight: bold;">if </span>(s==<span style="color: rgb(0, 128, 0); font-weight: bold;">"暂停下载"</span>) {<br>                  <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>.setText(<span style="color: rgb(0, 128, 0); font-weight: bold;">"开始下载"</span>);<br>                  vv.setVisibility(View.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">INVISIBLE</span>);<br>                  <span style="color: rgb(102, 14, 122); font-weight: bold;">tx</span>.setVisibility(View.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">VISIBLE</span>);<br>              } <span style="color: rgb(0, 0, 128); font-weight: bold;">else </span>{<br>                  <span style="color: rgb(102, 14, 122); font-weight: bold;">bt</span>.setText(<span style="color: rgb(0, 128, 0); font-weight: bold;">"暂停下载"</span>);<br>                  vv.setVisibility(View.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">VISIBLE</span>);<br>                  <span style="color: rgb(102, 14, 122); font-weight: bold;">tx</span>.setVisibility(View.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">INVISIBLE</span>);<br><br>              }<br>          }<br>      }<br>  }<br><br><span style="color: rgb(128, 128, 128); font-style: italic;">///  @Override   取消在main activity 监听 ，新建内部类实现！<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">  //public void onClick(View v) {<br></span><span style="color: rgb(128, 128, 128); font-style: italic;"><br></span><span style="color: rgb(128, 128, 128); font-style: italic;"><br></span><span style="color: rgb(128, 128, 128); font-style: italic;">//  }</span></pre></pre></pre></pre></div></body></html>
