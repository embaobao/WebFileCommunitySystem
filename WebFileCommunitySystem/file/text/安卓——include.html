<!DOCTYPE html><html lang='zh-cn'>
<head>
<meta charset='UTF-8'>
<meta http-equiv='content - type' content='text/html; charset=UTF-8'>
<metaname='viewport' content='width=device-width,initial-scale=1.0'/> 
<title>安卓——include</title></head><body><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">android中include标签是为了便于控件的覆用的一个很好解决方案。</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">但是也有一些需要注意的地方，下面是本人在项目中碰到过的一个问题，做此记录，便于以后查看。</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">include标签用法。</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">1.新建一个xml文件，命名 head.xml<br style="margin: 0px; padding: 0px;">head.xml文件内容如下：<br style="margin: 0px; padding: 0px;">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br style="margin: 0px; padding: 0px;">&lt;RelativeLayout xmlns:android="<a href="http://schemas.android.com/apk/res/android" style="margin: 0px; padding: 0px; color: rgb(7, 93, 179);">http://schemas.android.com/apk/res/android</a>"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;android:id="@+id/index_linear_foot"<br style="margin: 0px; padding: 0px;">android:layout_width="fill_parent"<br style="margin: 0px; padding: 0px;">android:layout_height="wrap_content"<br style="margin: 0px; padding: 0px;">android:orientation="horizontal"<br style="margin: 0px; padding: 0px;">&gt;<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ImageView<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;android:id="@+id/head_btn_refresh"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;android:layout_width="wrap_content"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;android:layout_height="wrap_content"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<br style="margin: 0px; padding: 0px;">&lt;/RelativeLayout&gt;<br style="margin: 0px; padding: 0px;">2.新建一个布局文件，命名 main.xml<br style="margin: 0px; padding: 0px;">main.xml文件内容如下：<br style="margin: 0px; padding: 0px;">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br style="margin: 0px; padding: 0px;">&lt;LinearLayout xmlns:android="<a href="http://schemas.android.com/apk/res/android" style="margin: 0px; padding: 0px; color: rgb(7, 93, 179);">http://schemas.android.com/apk/res/android</a>"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;android:layout_width="fill_parent"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;android:layout_height="fill_parent"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;android:orientation="vertical"<br style="margin: 0px; padding: 0px;">&gt;<br style="margin: 0px; padding: 0px;">&lt;include android:layout_width="fill_parent" android:layout_height="wrap_content" layout="@layout/head" /&gt;<br style="margin: 0px; padding: 0px;">&lt;/LinearLayout&gt;<br style="margin: 0px; padding: 0px;">注意：上面我们的include标签中是没有为它指定id的。</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">3.新建一个MainActivity，设置布局文件为main.xml;</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">4.假设我现在需要在代码中为head.xml中的RelativeLayout容器设置背景图片。<br style="margin: 0px; padding: 0px;">代码如下:<br style="margin: 0px; padding: 0px;">//获得布局容器对象<br style="margin: 0px; padding: 0px;">RelativeLayout head = (RelativeLayout)findViewById(R.id.index_linear_foot);<br style="margin: 0px; padding: 0px;">//设置背景图片<br style="margin: 0px; padding: 0px;">head.setBackgroundResource(R.drawable.head);<br style="margin: 0px; padding: 0px;">这样就OK了。</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">5.刚刚说到，我们的include标签中是没有为它指定id的，假设我们现在的main.xml文件布局容器是RelativeLayout,而我需要把某个控件放在head.xml下面。就需要使用到RelativeLayout布局容器的特有属性 android:layout_below="" 属性。还需要为include指定id属性。<br style="margin: 0px; padding: 0px;">那我们的main.xml文件变成如下：<br style="margin: 0px; padding: 0px;">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br style="margin: 0px; padding: 0px;">&lt;RelativeLayout xmlns:android="<a href="http://schemas.android.com/apk/res/android" style="margin: 0px; padding: 0px; color: rgb(7, 93, 179);">http://schemas.android.com/apk/res/android</a>"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;android:layout_width="fill_parent"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;android:layout_height="fill_parent"<br style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br style="margin: 0px; padding: 0px;">&lt;include android:id="@+id/main_head" android:layout_width="fill_parent" android:layout_height="wrap_content" layout="@layout/head" /&gt;<br style="margin: 0px; padding: 0px;">&lt;ListView<br style="margin: 0px; padding: 0px;">android:id="@+id/listview"<br style="margin: 0px; padding: 0px;">android:layout_width="fill_parent"<br style="margin: 0px; padding: 0px;">android:layout_height="wrap_content"<br style="margin: 0px; padding: 0px;">android:layout_below="@+id/main_headb"<br style="margin: 0px; padding: 0px;">/&gt;<br style="margin: 0px; padding: 0px;">&lt;/RelativeLayout&gt;<br style="margin: 0px; padding: 0px;">那接下来我们在运行我们的实例，结果发现，代码在运行到head.setBackgroundResource(R.drawable.head);<br style="margin: 0px; padding: 0px;">这一句的时候抛异常了<br style="margin: 0px; padding: 0px;">java.lang.NullPointerException</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: rgb(254, 254, 242);">原来：如果include指定了id的话，就不能直接把它里面的控件当成主xml中的控件来直接获得了，必须先获得这个xml布局文件，再通过布局文件findViewById来获得其子控件。<br style="margin: 0px; padding: 0px;">代码如下<br style="margin: 0px; padding: 0px;">View layout = getLayoutInflater().inflate(R.layout.head, null);<br style="margin: 0px; padding: 0px;">RelativeLayout head= (RelativeLayout)layout.findViewById(R.id.index_linear_foot);<br style="margin: 0px; padding: 0px;">//设置背景图片<br style="margin: 0px; padding: 0px;">head.setBackgroundResource(R.drawable.head);<br style="margin: 0px; padding: 0px;">这样就可以了。</p>
</body></html>
