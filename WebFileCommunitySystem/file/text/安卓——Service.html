<!DOCTYPE html><html lang='zh-cn'>
<head>
<meta charset='UTF-8'>
<meta http-equiv='content - type' content='text/html; charset=UTF-8'>
<metaname='viewport' content='width=device-width,initial-scale=1.0'/> 
<title>安卓——Service</title></head><body><div><pre style="background-color: rgb(255, 255, 255);"><pre style=""><pre style=""><div style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); line-height: 19px;"><div style="text-align: left;"><ol style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace;"><li><br></li></ol><div style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"><div><span style="color: #f92672;">public</span> <span style="color: #f92672;">class</span> <span style="color: rgb(166, 226, 46); text-decoration-line: underline;">MyService</span> <span style="color: #f92672;">extends</span> <span style="color: rgb(166, 226, 46); font-style: italic; text-decoration-line: underline;">Service</span> {</div><div>    <span style="color: #f92672;">public</span> <span style="color: #a6e22e;">MyService</span>() {</div><br><br><br><br><div>    }</div><br><div><span style="color: #75715e;">//    @Override</span></div><div><span style="color: #75715e;">//    public  void  on</span></div><br><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onCreate</span>() {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"onCreate()"</span>,<span style="color: #e6db74;">"onCreate()"</span>);</div><div>        <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onCreate</span>();</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #a6e22e;">onStartCommand</span>(<span style="color: #66d9ef;font-style: italic;">Intent</span> <span style="color: #fd971f;font-style: italic;">intent</span>,<span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #fd971f;font-style: italic;">flags</span>, <span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #fd971f;font-style: italic;">startId</span>) {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"onStartCommand"</span>,<span style="color: #e6db74;">"onStartCommand"</span>);</div><div>        <span style="color: #f92672;">return</span> <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onStartCommand</span>(intent, flags, startId);</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onDestroy</span>() {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"onDestroy"</span>,<span style="color: #e6db74;">"onDestroy"</span>);</div><div>        <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onDestroy</span>();</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">IBinder</span> <span style="color: #a6e22e;">onBind</span>(<span style="color: #66d9ef;font-style: italic;">Intent</span> <span style="color: #fd971f;font-style: italic;">intent</span>) {</div><div>        <span style="color: #75715e;">// TODO: Return the communication channel to the service.</span></div><div>        <span style="color: #75715e;">//throw new UnsupportedOperationException("Not yet implemented");</span></div><div>        <span style="color: #f92672;">return</span> <span style="color: #ae81ff;">null</span>;</div><div>    }</div><div>}</div><br></div><div style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"><br></div><div style="line-height: 19px;"><font face="Garamond" size="5">2   即可销毁</font><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(249, 38, 114);">public</span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px;"> </span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(249, 38, 114);">class</span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px;"> </span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(166, 226, 46); text-decoration-line: underline;">MyIntentserver</span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px;"> </span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(249, 38, 114);">extends</span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px;"> </span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(166, 226, 46); font-style: italic; text-decoration-line: underline;">IntentService</span><span style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px;"> {</span></div><div style="font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px;"><br><br><div><span style="color: #75715e;">    /**</span></div><div><span style="color: #75715e;">     * Creates an IntentService.  Invoked by your subclass's constructor.</span></div><div><span style="color: #75715e;">     *</span></div><div><span style="color: #75715e;">     */</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #a6e22e;">MyIntentserver</span>() {</div><div>        <span style="color: #fd971f;">super</span>(<span style="color: #e6db74;">"intent server"</span>);</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onCreate</span>() {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"inserver"</span>,<span style="color: #e6db74;">"onCreate() "</span><span style="color: #f92672;">+</span>Thread.<span style="color: #a6e22e;">currentThread</span>().<span style="color: #a6e22e;">getId</span>());</div><div>        <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onCreate</span>();</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #a6e22e;">onStartCommand</span>(<span style="color: #66d9ef;font-style: italic;">@Nullable</span> <span style="color: #66d9ef;font-style: italic;">Intent</span> <span style="color: #fd971f;font-style: italic;">intent</span>, <span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #fd971f;font-style: italic;">flags</span>, <span style="color: #66d9ef;font-style: italic;">int</span> <span style="color: #fd971f;font-style: italic;">startId</span>) {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"inserver"</span>,<span style="color: #e6db74;">"onStartCommand     "</span><span style="color: #f92672;">+</span>Thread.<span style="color: #a6e22e;">currentThread</span>().<span style="color: #a6e22e;">getId</span>());</div><div>        <span style="color: #f92672;">return</span> <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onStartCommand</span>(intent, flags, startId);</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onDestroy</span>() {</div><div>        Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"inserver"</span>,<span style="color: #e6db74;">"onDestroy "</span><span style="color: #f92672;">+</span>Thread.<span style="color: #a6e22e;">currentThread</span>().<span style="color: #a6e22e;">getId</span>());</div><div>        <span style="color: #fd971f;">super</span>.<span style="color: #a6e22e;">onDestroy</span>();</div><div>    }</div><br><div>    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>    <span style="color: #f92672;">protected</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onHandleIntent</span>(<span style="color: #66d9ef;font-style: italic;">@Nullable</span> <span style="color: #66d9ef;font-style: italic;">Intent</span> <span style="color: #fd971f;font-style: italic;">intent</span>) {</div><br><br><div>            Log.<span style="color: #a6e22e;">e</span>(<span style="color: #e6db74;">"inserver"</span>,<span style="color: #e6db74;">"onHandleIntent"</span><span style="color: #f92672;">+</span>Thread.<span style="color: #a6e22e;">currentThread</span>().<span style="color: #a6e22e;">getId</span>());</div><br><br><br><br><br><div>    }</div><div>}</div></div></div><hr style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace;"><font face="Consolas, Courier New, monospace"><span style="font-size: 10.5pt;">配置文件 AndroidManifest.xml </span></font><span style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace;">  </span></div><div style="font-size: 10.5pt; font-family: Consolas, &quot;Courier New&quot;, monospace; color: rgb(248, 248, 242); background-color: rgb(39, 40, 34); line-height: 19px;"><span style="font-size: 10.5pt;"> &lt;</span><span style="font-size: 10.5pt; color: rgb(249, 38, 114);">service</span><span style="font-size: 10.5pt;"> </span><span style="font-size: 10.5pt; color: rgb(166, 226, 46);">android:name</span><span style="font-size: 10.5pt;">=</span><span style="font-size: 10.5pt; color: rgb(230, 219, 116);">".MyIntentserver"</span><span style="font-size: 10.5pt;">&gt;&lt;/</span><span style="font-size: 10.5pt; color: rgb(249, 38, 114);">service</span><span style="font-size: 10.5pt;">&gt;</span><div style="line-height: 19px;"><div>        &lt;<span style="color: #f92672;">service</span></div><div>            <span style="color: #a6e22e;">android:name</span>=<span style="color: #e6db74;">".MyService"</span></div><div>            <span style="color: #a6e22e;">android:enabled</span>=<span style="color: #e6db74;">"true"</span></div><div>            <span style="color: #a6e22e;">android:exported</span>=<span style="color: #e6db74;">"true"</span>&gt;</div><br><div>        &lt;/<span style="color: #f92672;">service</span>&gt;</div></div><div style="line-height: 19px;"><div><br></div><div><br></div><div>3 //执行server 周期 <span style="font-size: 10.5pt;"> </span></div><div><span style="font-size: 10.5pt; color: rgb(249, 38, 114);">final</span><span style="font-size: 10.5pt;"> </span><span style="font-size: 10.5pt; color: rgb(102, 217, 239); font-style: italic;">Intent</span><span style="font-size: 10.5pt;"> </span><span style="font-size: 10.5pt;">in</span><span style="font-size: 10.5pt; color: rgb(249, 38, 114);">=new</span><span style="font-size: 10.5pt;">  </span><span style="font-size: 10.5pt; color: rgb(166, 226, 46);">Intent</span><span style="font-size: 10.5pt;">(</span><span style="font-size: 10.5pt;">MainActivity</span><span style="font-size: 10.5pt;">.</span><span style="font-size: 10.5pt;">this</span><span style="font-size: 10.5pt;">,</span><span style="font-size: 10.5pt;">MyIntentserver</span><span style="font-size: 10.5pt;">.</span><span style="font-size: 10.5pt;">class</span><span style="font-size: 10.5pt;">);</span></div><div style="line-height: 19px;"><br><div>        <span style="color: #a6e22e;">findViewById</span>(R.id.start).<span style="color: #a6e22e;">setOnClickListener</span>(</div><div>                <span style="color: #f92672;">new</span> View.<span style="color: #a6e22e;">OnClickListener</span>() {</div><div>                    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>                    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onClick</span>(<span style="color: #66d9ef;font-style: italic;">View</span> <span style="color: #fd971f;font-style: italic;">v</span>) {</div><div>                        <span style="color: #a6e22e;">startService</span>(in);</div><div>                    }</div><div>                }</div><div>        );</div><br><div>        <span style="color: #a6e22e;">findViewById</span>(R.id.stop).<span style="color: #a6e22e;">setOnClickListener</span>(</div><div>                <span style="color: #f92672;">new</span> View.<span style="color: #a6e22e;">OnClickListener</span>() {</div><div>                    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>                    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onClick</span>(<span style="color: #66d9ef;font-style: italic;">View</span> <span style="color: #fd971f;font-style: italic;">v</span>) {</div><div>                        <span style="color: #a6e22e;">stopService</span>(in);</div><div>                    }</div><div>                }</div><div>        );</div><div>        <span style="color: #a6e22e;">findViewById</span>(R.id.reciver).<span style="color: #a6e22e;">setOnClickListener</span>(</div><div>                <span style="color: #f92672;">new</span> View.<span style="color: #a6e22e;">OnClickListener</span>() {</div><div>                    <span style="color: #66d9ef;font-style: italic;">@Override</span></div><div>                    <span style="color: #f92672;">public</span> <span style="color: #66d9ef;font-style: italic;">void</span> <span style="color: #a6e22e;">onClick</span>(<span style="color: #66d9ef;font-style: italic;">View</span> <span style="color: #fd971f;font-style: italic;">v</span>) {</div><div>                        <span style="color: #66d9ef;font-style: italic;">Intent</span> in<span style="color: #f92672;">=new</span> <span style="color: #a6e22e;">Intent</span>(<span style="color: #e6db74;">"myreciver"</span>);</div><div>                        in.<span style="color: #a6e22e;">putExtra</span>(<span style="color: #e6db74;">"a"</span>,<span style="color: #e6db74;">"您接受到一条广播：您的好友在2018 祝你开心！"</span>);</div><div>                        <span style="color: #a6e22e;">sendBroadcast</span>(in);</div><br><div>                    }</div><div>                }</div><div>        );</div><br><br></div><div>                   </div></div><hr style="font-size: 10.5pt;"></div></pre></pre></pre></div>
</body></html>
