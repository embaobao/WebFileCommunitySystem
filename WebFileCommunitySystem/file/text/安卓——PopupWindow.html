<!DOCTYPE html><html lang='zh-cn'>
<head>
<meta charset='UTF-8'>
<meta http-equiv='content - type' content='text/html; charset=UTF-8'>
<metaname='viewport' content='width=device-width,initial-scale=1.0'/> 
<title>安卓——PopupWindow</title></head><body><div><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><span style="color:#660e7a;font-weight:bold;"><br></span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><span style="color:#660e7a;font-weight:bold;"><br></span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><span style="color:#660e7a;font-weight:bold;"><br></span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><span style="color:#660e7a;font-weight:bold;">addbt</span>.setOnClickListener(<span style="color:#000080;font-weight:bold;">new </span>OnClickListener() {<br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onClick(View v) {<br>        LayoutInflater inflater=getLayoutInflater();<br>        View view=inflater.inflate(R.layout.<span style="color:#660e7a;font-weight:bold;font-style:italic;">scaneradd</span>,<span style="color:#000080;font-weight:bold;">null</span>);<br>        <span style="color:#000080;font-weight:bold;">final </span>PopupWindow p=<span style="color:#000080;font-weight:bold;">new </span>PopupWindow(view,<br>                <span style="color:#0000ff;">390</span>,<br>                ViewGroup.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">WRAP_CONTENT</span>,<br>                <span style="color:#000080;font-weight:bold;">true<br></span><span style="color:#000080;font-weight:bold;">        </span>);<br>        p.setTouchable(<span style="color:#000080;font-weight:bold;">true</span>);<br>        p.setOutsideTouchable(<span style="color:#000080;font-weight:bold;">true</span>);<br>        <span style="color:#808080;font-style:italic;">// 如果不设置PopupWindow的背景，有些版本就会出现一个问题：无论是点击外部区域还是Back键都无法dismiss弹框<br></span><span style="color:#808080;font-style:italic;">        </span>p.setBackgroundDrawable(<span style="color:#000080;font-weight:bold;">new </span>ColorDrawable());<br>        p.showAtLocation(Main2Activity.<span style="color:#000080;font-weight:bold;">this</span>.findViewById(R.id.<span style="color:#660e7a;font-weight:bold;font-style:italic;">top_add</span>), Gravity.<span style="color:#660e7a;font-weight:bold;font-style:italic;">TOP</span>|Gravity.<span style="color:#660e7a;font-weight:bold;font-style:italic;">RIGHT</span>,-<span style="color:#0000ff;">1000</span>,<span style="color:#0000ff;">118</span>);<br>    }<br>});</pre></div>
</body></html>
