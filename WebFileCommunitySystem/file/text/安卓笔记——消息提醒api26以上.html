<!DOCTYPE html><html lang='zh-cn'>
<head>
<meta charset='UTF-8'>
<meta http-equiv='content - type' content='text/html; charset=UTF-8'>
<metaname='viewport' content='width=device-width,initial-scale=1.0'/> 
<title>安卓笔记——消息提醒api26以上</title></head><body><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><ol><li>代码如下 xml 界面 button 控件</li></ol></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;">   &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">Button<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_width=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"match_parent"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:layout_height=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"wrap_content"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:text=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"发送"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:onClick=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"send"</span> <span style="font-size: 10.5pt;">/&gt;</span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;"><span style="font-size: 10.5pt;">   2. java 代码		</span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;">	public  void  <span style="font-size: 10.5pt;">send(View view)</span></pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;">{<br>    NotificationManager nm  =(NotificationManager) getSystemService(<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">NOTIFICATION_SERVICE</span>);<br><br>    String id=<span style="color: rgb(0, 128, 0); font-weight: bold;">"1"</span>;<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">if </span>(Build.VERSION.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SDK_INT</span>&gt;=<span style="color: rgb(0, 0, 255);">26</span>)<br>    {<br>        <span style="color: rgb(128, 128, 128); font-style: italic;">//在安卓26以上发通知需要新建消息通道<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        // NotificationChannel channel=new  NotificationChannel<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        // (信道 id &lt;String&gt; , 信道 Name &lt;String&gt;,系统常量 IMPORTANT_None 发出 不显示| low 显示不提醒| default提示横幅| min| max呼吸灯 震动  | hight 震动);<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        //nm.createNotificationChannel(channel);<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span>}<br>    Notification.Builder builder=<span style="color: rgb(0, 0, 128); font-weight: bold;">new </span>Notification.Builder(<span style="color: rgb(0, 0, 128); font-weight: bold;">this</span>);;<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">if </span>(Build.VERSION.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SDK_INT</span>&gt;=<span style="color: rgb(0, 0, 255);">26 </span>)<br>    {<br>        <span style="color: rgb(128, 128, 128); font-style: italic;">//在安卓26以上Builder Build.VERSION<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">       // builder=new  Notification.Builder(this,id);<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span>}<br>    <span style="color: rgb(0, 0, 128); font-weight: bold;">else<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">    </span>{<br>        builder=<span style="color: rgb(0, 0, 128); font-weight: bold;">new </span>Notification.Builder(<span style="color: rgb(0, 0, 128); font-weight: bold;">this</span>);<br>    }<br><br>    builder.setSmallIcon(R.drawable.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">ic_launcher</span>);<br><br><br>}</pre><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 10.5pt;">   </pre>
</body></html>
